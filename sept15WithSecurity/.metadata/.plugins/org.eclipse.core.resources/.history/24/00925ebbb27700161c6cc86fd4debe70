package com.group.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

import com.group.DAO.supplierDAO;
import com.group.model.Category;
import com.group.model.Supplier;

@Controller
public class supplierController {
	
		  @Autowired
			
		supplierDAO suppDAO;
		
		@RequestMapping(value = "/supplier", method = RequestMethod.GET)
		public ModelAndView showSupplierr()
		{
			String mydata=suppDAO.displayALL();
			ModelAndView mv=new ModelAndView("supplier","supplier",new Supplier());
			return mv;
		}
		@RequestMapping(value = "/addsupplier", method = RequestMethod.POST)
		//previous category has this method as getCategory here we have schanged it to addsupplier
		public ModelAndView addSupplier(Supplier suppins) 
		{
			suppDAO.addSupplier(suppins);
			String mydata=suppDAO.displayALL();
			ModelAndView mv=new ModelAndView("supplier","supplier",new Supplier());
			mv.addObject("suppdata",mydata);
			return mv;
		}
		@RequestMapping(value = "/delete", method = RequestMethod.GET)
		public ModelAndView deleteSupplier(@RequestParam("id") String suppid)
		{
			String mydata=suppDAO.displayALL();
			suppDAO.deleteSupplier(suppid);
			ModelAndView mv=new ModelAndView("supplier","supplier",new Supplier());
			mv.addObject("suppdata",mydata);
			return mv;
		}

		//function for updating data
		@RequestMapping(value = "/update", method = RequestMethod.POST)
		public ModelAndView updateCommit(Category upcat)
		{
		boolean data=true;
			ModelAndView mv=new ModelAndView("category","category",new Category());
			String catJSonList=catdao.display();
			mv.addObject("catdata",catJSonList);
			mv.addObject("check",data);
			return mv;
		}

		@RequestMapping(value = "/update", method = RequestMethod.GET)
		public ModelAndView updateSupplier(@RequestParam("id") String cid)
		{
			Category cat=catdao.displayRecord(cid);
			ModelAndView mv=new ModelAndView("supplier","supplier",cat);
			mv.addObject("check",false);
			return mv;
		}

		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
}
